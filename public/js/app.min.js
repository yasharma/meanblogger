!function(){"use strict";angular.module("app",["ngRoute","ngAnimate","ngSanitize","app.controllers","app.factories","app.directives","ui.bootstrap","angular-loading-bar"]).config(["$routeProvider","cfpLoadingBarProvider",function($routeProvider,cfpLoadingBarProvider){cfpLoadingBarProvider.includeSpinner=!1,$routeProvider.when("/",{templateUrl:"posts/views/posts.html",controller:"PostController"}).when("/search?:q",{templateUrl:"posts/views/posts.html",controller:"PostSearchController"}).when("/:slug",{templateUrl:"posts/views/single.html",controller:"ViewPostController"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";angular.module("app.factories",[]).factory("AuthenticationService",function(){var auth={isLogged:!1};return auth}).factory("RestSvr",["$http",function($http){return{login:function(apiUrl,data){return $http.post(apiUrl,data).then(function(response){return response.data.errors?{errors:response.data.errors}:{user:response.data.user,token:response.data.token}})},paginate:function(apiUrl,params,queryString){var p=angular.isUndefined(params)?"":params;angular.isUndefined(queryString)?"":queryString;return $http.get(apiUrl,p).then(function(response){return{records:response.data.records,paging:response.data.paging}})},get:function(apiUrl,params){angular.isUndefined(params)?null:params;return $http.get(apiUrl,params).then(function(response){return{records:response.data.records}})},getById:function(apiUrl,id){return $http.get(apiUrl+id).then(function(response){return{record:response.data}})},post:function(apiUrl,data){return $http.post(apiUrl,data).then(function(response){return 11e3===response.data.code&&"MongoError"===response.data.name?{result:!1,message:"Category already exist"}:{result:response.data.result,message:response.data.message,record:response.data.record}})},put:function(apiUrl,id,data){return $http.put(apiUrl+id,data).then(function(response){return 11e3===response.data.code&&"MongoError"===response.data.name?{result:!1,message:"Category already exist"}:{result:response.data.result,message:response.data.message,record:response.data.record}})},delete:function(apiUrl,id){return $http.delete(apiUrl+id).then(function(response){return{message:response.data.message,result:response.data.result}})}}}])}(),function(){"use strict";angular.module("app.directives",[]).directive("header",function(){return{restrict:"A",templateUrl:"partials/header.html"}}).directive("sidebar",function(){return{restrict:"A",templateUrl:"partials/sidebar.html",controller:["$scope","$location",function($scope,$location){$scope.search=function(isValid){isValid&&$location.path("/search").search("q",$scope.post.search)}}]}}).directive("adminHeader",function(){return{restrict:"A",templateUrl:"partials/admin-header.html",controller:["$scope","$filter",function($scope,$filter){}]}}).directive("adminSidebar",function(){return{restrict:"A",templateUrl:"partials/admin-sidebar.html",controller:["$scope","$filter",function($scope,$filter){}]}}).directive("navMenu",["$location",function($location){return function(scope,element,attrs){for(var links=element.find("a"),urlMap={},activeClass=attrs.navMenu||"active",i=links.length-1;i>=0;i--){var link=angular.element(links[i]),url=angular.isUndefined(link.attr("href"))?link.attr("ng-href"):link.attr("href");"#"===url.substring(0,1)?urlMap[url.substring(1)]=link:"admin.html#"===url.substring(0,url.indexOf("/"))?urlMap[url.substring(url.indexOf("/"))]=link:urlMap[url]=link}scope.$on("$routeChangeStart",function(){var path=urlMap[$location.path()];links.parent("li").removeClass(activeClass),path&&path.parent("li").addClass(activeClass)})}}]).directive("setHeight",["$window",function($window){return{restrict:"A",link:function(scope,element,attrs){element.css("min-height",$window.innerHeight-50+"px")}}}])}(),function(){"use strict";angular.module("app.controllers",[]).controller("PostController",["$scope","RestSvr","$location",function($scope,RestSvr,$location){$scope.forceEllipses=!0,$scope.maxSize=10,$scope.paging={page:1};var load=function(){RestSvr.paginate("/posts/paginate",{params:{page:$scope.paging.page,status:!0}}).then(function(response){$scope.posts=response.records,$scope.paging=response.paging})};$scope.pageChanged=function(){load()},load(),$scope.viewPost=function(index){$location.path("/"+$scope.posts[index].slug)}}]).controller("PostSearchController",["$scope","RestSvr","$location",function($scope,RestSvr,$location){$scope.forceEllipses=!0,$scope.maxSize=10,$scope.paging={page:1};var load=function(){RestSvr.paginate("/posts/search",{params:{page:$scope.paging.page,status:!0,q:$location.search().q}}).then(function(response){$scope.posts=response.records,$scope.paging=response.paging})};$scope.pageChanged=function(){load()},load(),$scope.viewPost=function(index){$location.path("/"+$scope.posts[index].slug)}}]).controller("ViewPostController",["$scope","RestSvr","$routeParams",function($scope,RestSvr,$routeParams){RestSvr.getById("/posts/",$routeParams.slug).then(function(response){$scope.Post=response.record})}])}();